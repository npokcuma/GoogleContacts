<Window
	x:Class="ipogonyshevNetTest.View.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:converters="clr-namespace:ipogonyshevNetTest.Converters"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:viewModel="clr-namespace:ipogonyshevNetTest.ViewModel"
	Title="GoogleContacts"
	Width="1200"
	Height="600"
	d:DataContext="{d:DesignInstance Type=viewModel:MainWindowViewModel,
	                                 IsDesignTimeCreatable=True}"
	mc:Ignorable="d">
	<Window.Resources>
		<Style TargetType="TextBlock">
			<Setter Property="FontSize" Value="14" />
		</Style>
		<Style TargetType="TextBox">
			<Setter Property="FontSize" Value="14" />
		</Style>
		<converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
	</Window.Resources>
	<Grid>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="0.6*" />
			<ColumnDefinition Width="*" />
			<ColumnDefinition Width="0.8*" />
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="70" />
			<RowDefinition Height="*" />
			<RowDefinition Height="70" />
		</Grid.RowDefinitions>
		<StackPanel Grid.Row="1" Orientation="Vertical">
			<TextBlock
				HorizontalAlignment="Center"
				FontSize="20"
				FontWeight="Bold"
				Text="Lables" />
			<ListBox
				HorizontalContentAlignment="Stretch"
				ItemsSource="{Binding Lables}"
				SelectedItem="{Binding SelectedLable}">
				<ListBox.ItemTemplate>
					<DataTemplate>
						<StackPanel Margin="5">
							<TextBlock FontSize="18" Text="{Binding Path=Name}" />

							<TextBlock
								Margin="5,0"
								FontSize="18"
								Text="{Binding Path=Contacts.Count}" />
							<Button
								Margin="5,0"
								Command="{Binding EditCommand}"
								Content="Edit" />
							<Button
								Margin="5,0"
								Command="{Binding DeleteCommand}"
								Content="Delete" />
						</StackPanel>
					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
		</StackPanel>
		<StackPanel Grid.Column="0">

			<Button
				Command="{Binding ShowAllContactsCommand}"
				Content="All Contacts"
				DockPanel.Dock="Top" />



		</StackPanel>

		<StackPanel Grid.Column="1">
			<TextBlock
				HorizontalAlignment="Center"
				FontSize="20"
				FontWeight="Bold"
				Text="Add Lable" />

			<StackPanel HorizontalAlignment="Right" Orientation="Horizontal">
				<ComboBox
					Width="250"
					Height="30"
					Margin="0,0,20,0"
					ItemsSource="{Binding Lables}"
					SelectedItem="{Binding SelectedLableForContact}">
					<ComboBox.ItemTemplate>
						<DataTemplate>
							<TextBlock Text="{Binding Path=Name}" />
						</DataTemplate>
					</ComboBox.ItemTemplate>
				</ComboBox>
				<Button Command="{Binding AddLableForContactCommand}" Content="Add lable" />
			</StackPanel>
			<TextBlock
				HorizontalAlignment="Left"
				FontSize="20"
				FontWeight="Bold"
				Text="Contacts" />
			<StackPanel Height="57" />




			<ListBox
				Margin="0,50,0,150"
				ItemsSource="{Binding Contacts}"
				SelectedItem="{Binding SelectedContact}">
				<ListBox.ItemTemplate>
					<DataTemplate>
						<StackPanel Margin="5">

							<StackPanel Margin="5">
								<TextBlock FontSize="18" Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />
								<TextBlock Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}" />
								<TextBlock Text="{Binding EmailAddress, UpdateSourceTrigger=PropertyChanged}" />

							</StackPanel>
							<Button
								Margin="5,0"
								Command="{Binding RemoveFromLableCommand}"
								Content="Remove from lable"
								Visibility="{Binding DataContext.SelectedLable, RelativeSource={RelativeSource AncestorType={x:Type Window}}, Converter={StaticResource NullToVisibilityConverter}}" />
						</StackPanel>

					</DataTemplate>
				</ListBox.ItemTemplate>
			</ListBox>
		</StackPanel>

		<StackPanel Grid.Row="1" Grid.Column="2">
			<TextBlock
				HorizontalAlignment="Center"
				FontSize="20"
				FontWeight="Bold"
				Text="Edit contact" />
			<StackPanel DataContext="{Binding SelectedContact}">
				<TextBlock Text="Name" />
				<TextBox Text="{Binding Name, UpdateSourceTrigger=PropertyChanged}" />
				<TextBlock Text="Phone" />
				<TextBox Text="{Binding PhoneNumber, UpdateSourceTrigger=PropertyChanged}" />
				<TextBlock Text="Email" />
				<TextBox Text="{Binding EmailAddress, UpdateSourceTrigger=PropertyChanged}" />
			</StackPanel>
		</StackPanel>
		<StackPanel
			Grid.Row="2"
			Grid.Column="1"
			HorizontalAlignment="Center"
			Orientation="Horizontal">
			<Button
				Width="200"
				Height="35"
				Margin="20,0"
				Command="{Binding AddContactCommand}"
				Content="Add new contact" />
			<Button
				Width="200"
				Height="35"
				Margin="20,0"
				Command="{Binding DeleteContactCommand}"
				Content="DeleteContact" />
		</StackPanel>

		<StackPanel
			Grid.Row="2"
			Grid.Column="2"
			HorizontalAlignment="Center"
			VerticalAlignment="Center">
			<Button
				Width="200"
				Height="35"
				Command="{Binding SaveContactCommand}"
				Content="Save" />
		</StackPanel>
		<StackPanel
			Grid.Row="2"
			HorizontalAlignment="Center"
			VerticalAlignment="Center">
			<Button
				Width="200"
				Height="35"
				Command="{Binding AddLableCommand}"
				Content="Add label" />
		</StackPanel>
	</Grid>
</Window>
